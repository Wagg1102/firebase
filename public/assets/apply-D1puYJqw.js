import{r as g}from"./request-B1Pnm9MM.js";import{_ as A,f as c,k as F,h as b,g as S,c as T,w as a,r as n,i as M,o as f,b as V,a as l,F as q,l as I,d as h,u as L}from"./index-CQa1UL8_.js";const B={setup(){const _=JSON.parse(localStorage.getItem("user_info")||"{}"),t=L(),s=c(!1),e=c([]),r=c({userId:"",title:"",startTime:"",endTime:"",detail:""}),y={title:[{required:!0,message:"Please input the title",trigger:"blur"}],startTime:[{required:!0,message:"Please select the start time",trigger:"blur"}],endTime:[{required:!0,message:"Please select the end time",trigger:"blur"}],detail:[{required:!0,message:"Please enter the detail",trigger:"blur"}]},m=c(null),u=()=>{r.title="",r.startTime="",r.endTime="",r.detail=""},d=()=>{m.value.validate(i=>{i&&(s.value=!0,g.post("https://applies-fyoxpel6ba-uc.a.run.app",r.value).then(()=>{alert("Activity submitted successfully!"),s.value=!1,u(),t.push({name:"MyApply"})}))})};return F(async()=>{s.value=!0,await g.get("https://getallactivities-fyoxpel6ba-uc.a.run.app").then(i=>{e.value=i,s.value=!1})}),{form:r,rules:y,activityFormRef:m,cancelForm:u,submitForm:d,showLoading:s,activitiesList:e,onSelect:i=>{r.value={...e.value.find(p=>p.id===i),userId:_.id}}}}},H={class:"button-container"};function N(_,t,s,e,r,y){const m=n("el-option"),u=n("el-select"),d=n("el-form-item"),i=n("el-date-picker"),p=n("el-input"),k=n("el-form"),v=n("el-button"),w=n("el-card"),x=M("loading");return f(),b("div",null,[S((f(),T(w,null,{default:a(()=>[t[6]||(t[6]=V("h2",{style:{"margin-bottom":"20px"}},"Apply for an Activity",-1)),l(k,{model:e.form,ref:"activityFormRef",rules:e.rules,"label-position":"top","label-width":"120px"},{default:a(()=>[l(d,{label:"Select Activity"},{default:a(()=>[l(u,{modelValue:e.form.id,"onUpdate:modelValue":t[0]||(t[0]=o=>e.form.id=o),autocomplete:"off",onChange:e.onSelect},{default:a(()=>[(f(!0),b(q,null,I(e.activitiesList,(o,C)=>(f(),T(m,{key:C,label:o.title,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1}),l(d,{label:"Start Time",prop:"startTime"},{default:a(()=>[l(i,{style:{width:"100%"},readonly:"",modelValue:e.form.startTime,"onUpdate:modelValue":t[1]||(t[1]=o=>e.form.startTime=o),type:"datetime",placeholder:"Auto fill after selecting the activity","value-format":"yyyy-MM-dd HH:mm:ss"},null,8,["modelValue"])]),_:1}),l(d,{label:"End Time",prop:"endTime"},{default:a(()=>[l(i,{style:{width:"100%"},readonly:"",modelValue:e.form.endTime,"onUpdate:modelValue":t[2]||(t[2]=o=>e.form.endTime=o),type:"datetime",placeholder:"Auto fill after selecting the activity","value-format":"yyyy-MM-dd HH:mm:ss"},null,8,["modelValue"])]),_:1}),l(d,{label:"Detail",prop:"detail"},{default:a(()=>[l(p,{readonly:"",modelValue:e.form.detail,"onUpdate:modelValue":t[3]||(t[3]=o=>e.form.detail=o),type:"textarea",rows:10,placeholder:"Auto fill after selecting the activity"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),V("div",H,[l(v,{onClick:e.cancelForm},{default:a(()=>t[4]||(t[4]=[h("Cancel")])),_:1},8,["onClick"]),l(v,{type:"primary",onClick:e.submitForm},{default:a(()=>t[5]||(t[5]=[h("Submit")])),_:1},8,["onClick"])])]),_:1})),[[x,e.showLoading]])])}const D=A(B,[["render",N],["__scopeId","data-v-272a083b"]]);export{D as default};
