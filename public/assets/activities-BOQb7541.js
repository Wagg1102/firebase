import{r as y}from"./request-B1Pnm9MM.js";import{_ as E,f as g,j as x,k as L,h as P,g as z,c as U,w as i,r as d,i as N,o as A,b as T,a as l,d as m,t as W}from"./index-CQa1UL8_.js";const B={setup(){const v=g(!1),t=g([]),p=g(!1),e=x({page:1,pageSize:10,search_field:"title"}),n=x({id:null,title:"",startTime:"",endTime:"",detail:""}),_=g("Add Activity"),s="120px",u={title:[{required:!0,message:"Please input the name",trigger:"blur"}],startTime:[{required:!0,message:"Please select the start time",trigger:"blur"}],endTime:[{required:!0,message:"Please select the end time",trigger:"blur"}],detail:[{required:!0,message:"Please enter the detail",trigger:"blur"}]},f=g(null),r=()=>{v.value=!0,y.get("https://activities-fyoxpel6ba-uc.a.run.app",{params:e}).then(a=>{t.value=a,v.value=!1})},V=a=>{y.post("https://activities-fyoxpel6ba-uc.a.run.app",a).then(()=>{r(),p.value=!1})},C=a=>{n.id=a.id,n.title=a.title,n.startTime=a.startTime,n.endTime=a.endTime,n.detail=a.detail,_.value="Edit Activity",p.value=!0},h=()=>{y.put("https://activities-fyoxpel6ba-uc.a.run.app",n).then(()=>{r(),p.value=!1})},k=a=>{y.delete(`https://activities-fyoxpel6ba-uc.a.run.app?id=${a}`).then(()=>{r()})},c=()=>{n.id=null,n.title="",n.startTime="",n.endTime="",n.detail="",_.value="Add Activity",p.value=!0},b=()=>{f.value.validate(a=>{a&&(n.id?h():V(n))})};return L(()=>{r()}),{query:e,activities:t,dialogVisible:p,form:n,formTitle:_,formLabelWidth:s,rules:u,activityFormRef:f,editActivity:C,deleteActivity:k,addNewActivity:c,submitForm:b,showLoading:v,onPage:a=>{e.page=a,r()},getActivities:r,exportCsv:()=>{location.href="https://exportactivities-fyoxpel6ba-uc.a.run.app"}}}},F={style:{"margin-bottom":"20px"}},I={style:{"margin-top":"20px"}},R={slot:"footer",class:"dialog-footer"};function j(v,t,p,e,n,_){const s=d("el-button"),u=d("el-input"),f=d("el-space"),r=d("el-table-column"),V=d("el-tag"),C=d("el-popover"),h=d("el-table"),k=d("el-pagination"),c=d("el-form-item"),b=d("el-date-picker"),w=d("el-form"),a=d("el-dialog"),S=d("el-card"),q=N("loading");return A(),P("div",null,[z((A(),U(S,null,{default:i(()=>[T("div",F,[l(f,null,{default:i(()=>[l(s,{onClick:e.addNewActivity,type:"success"},{default:i(()=>t[7]||(t[7]=[m("Add Activity")])),_:1},8,["onClick"]),l(s,{onClick:e.exportCsv,type:"warning"},{default:i(()=>t[8]||(t[8]=[m("Export CSV")])),_:1},8,["onClick"]),l(f,null,{default:i(()=>[l(u,{modelValue:e.query.search,"onUpdate:modelValue":t[0]||(t[0]=o=>e.query.search=o),placeholder:"Search title"},null,8,["modelValue"]),l(s,{onClick:e.getActivities},{default:i(()=>t[9]||(t[9]=[m("search")])),_:1},8,["onClick"])]),_:1})]),_:1})]),l(h,{data:e.activities.data,style:{width:"100%"}},{default:i(()=>[l(r,{align:"center",prop:"id",label:"ID"}),l(r,{align:"center",prop:"title",label:"Title"}),l(r,{align:"center",prop:"startTime",label:"Start Time"}),l(r,{align:"center",prop:"endTime",label:"End Time"}),l(r,{align:"center",label:"Detail"},{default:i(({row:o})=>[l(C,{placement:"top",width:"300",trigger:"hover"},{reference:i(()=>[l(V,{type:"info"},{default:i(()=>t[10]||(t[10]=[m("Detail")])),_:1})]),default:i(()=>[T("p",null,W(o.detail),1)]),_:2},1024)]),_:1}),l(r,{align:"center",label:"Actions"},{default:i(({row:o})=>[l(s,{onClick:D=>e.editActivity(o),type:"primary",size:"small"},{default:i(()=>t[11]||(t[11]=[m("Edit")])),_:2},1032,["onClick"]),l(s,{onClick:D=>e.deleteActivity(o.id),type:"danger",size:"small"},{default:i(()=>t[12]||(t[12]=[m("Delete")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),T("div",I,[l(k,{"current-page":e.activities.page,"page-size":e.activities.pageSize,total:e.activities.total,onCurrentChange:e.onPage,background:"",layout:"prev, pager, next"},null,8,["current-page","page-size","total","onCurrentChange"])]),l(a,{title:e.formTitle,modelValue:e.dialogVisible,"onUpdate:modelValue":t[6]||(t[6]=o=>e.dialogVisible=o),width:"30%"},{default:i(()=>[l(w,{model:e.form,ref:"activityFormRef",rules:e.rules},{default:i(()=>[l(c,{label:"Title","label-width":e.formLabelWidth,prop:"title"},{default:i(()=>[l(u,{modelValue:e.form.title,"onUpdate:modelValue":t[1]||(t[1]=o=>e.form.title=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(c,{label:"Start Time","label-width":e.formLabelWidth,prop:"startTime"},{default:i(()=>[l(b,{modelValue:e.form.startTime,"onUpdate:modelValue":t[2]||(t[2]=o=>e.form.startTime=o),type:"datetime",placeholder:"Select date and time"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(c,{label:"End Time","label-width":e.formLabelWidth,prop:"endTime"},{default:i(()=>[l(b,{modelValue:e.form.endTime,"onUpdate:modelValue":t[3]||(t[3]=o=>e.form.endTime=o),type:"datetime",placeholder:"Select date and time"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(c,{label:"Detail","label-width":e.formLabelWidth,prop:"detail"},{default:i(()=>[l(u,{modelValue:e.form.detail,"onUpdate:modelValue":t[4]||(t[4]=o=>e.form.detail=o),type:"textarea",rows:4,placeholder:"Enter detail here"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model","rules"]),T("div",R,[l(s,{onClick:t[5]||(t[5]=o=>e.dialogVisible=!1)},{default:i(()=>t[13]||(t[13]=[m("Cancel")])),_:1}),l(s,{type:"primary",onClick:e.submitForm},{default:i(()=>t[14]||(t[14]=[m("Confirm")])),_:1},8,["onClick"])])]),_:1},8,["title","modelValue"])]),_:1})),[[q,e.showLoading]])])}const H=E(B,[["render",j],["__scopeId","data-v-3928f436"]]);export{H as default};
